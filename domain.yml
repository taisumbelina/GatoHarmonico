version: "3.1"

intents:
  - saudacao
  - despedida
  - agradecimento
  - afirmacao
  - negacao
  - restart
  - nlu_fallback
  - agendamento_aula
  - ask_preco_aula
  - agendamento_consultoria
  - ask_preco_consultoria
  - compra_instrumento
  - listagem_instrumentos
  - materiais
  - fornecer_dados_pessoais
  - agendamento_hora
  - agendamento_dia # PADRONIZADO PARA AGENDAMENTO_DIA
  - fornecer_hora_agendamento # Apenas a hora do agendamento do serviÃ§o
  - agendamento_modo
  - pagamento
  - EXTERNAL_inactivity_reminder

entities:
  - instrumentos
  - modo_agendamento
  - nome
  - cpf
  - rg
  - date
  - time
  - forma_pagamento
  - area_consultoria

slots:
  instrumentos:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: instrumentos
  modo_agendamento:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: modo_agendamento
  nome:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: nome
        intent: fornecer_dados_pessoais
  cpf:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: cpf
        intent: fornecer_dados_pessoais
        conditions:
          - active_loop: personal_data_form
            requested_slot: cpf
  rg:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: rg
        intent: fornecer_dados_pessoais
        conditions:
          - active_loop: personal_data_form
            requested_slot: rg
  rg_display: # NOVO SLOT PARA EXIBIÃ‡ÃƒO
    type: text
    influence_conversation: false
    mappings:
      - type: custom
  data_nascimento:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: date
        intent: fornecer_dados_pessoais
        conditions:
          - active_loop: personal_data_form
            requested_slot: data_nascimento
      - type: from_entity
        entity: time
        intent: fornecer_dados_pessoais
        conditions:
          - active_loop: personal_data_form
            requested_slot: data_nascimento
  data_agendamento:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: date
        intent: agendamento_dia # PADRONIZADO PARA AGENDAMENTO_DIA
      - type: from_entity
        entity: time
        intent: agendamento_dia # PADRONIZADO PARA AGENDAMENTO_DIA
      - type: from_entity
        entity: date
        intent: agendamento_hora
      - type: from_entity
        entity: time
        intent: agendamento_hora
  hora_agendamento:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: time
        intent: fornecer_hora_agendamento
      - type: from_entity
        entity: time
        intent: agendamento_hora
  forma_pagamento:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: forma_pagamento
        intent: pagamento
  servico_escolhido:
    type: text
    influence_conversation: true
    mappings:
      - type: custom
  preco_servico:
    type: float
    influence_conversation: true
    mappings:
      - type: custom
  dados_pessoais_confirmados_pendente:
    type: bool
    influence_conversation: true
    mappings:
      - type: custom

forms:
  personal_data_form:
    required_slots:
      - nome
      - cpf
      - rg
      - data_nascimento

responses:
  utter_saudacao:
  - text: "Miau! ğŸ˜º Tudo certo por aqui! Eu sou o Freddie Meowcury, seu atendente felino da Gato HarmÃ´nicoğŸ¶âœ¨ Na nossa toca vendemos instrumentos, fornecemos aulas e consultorias, e temos materiais incrÃ­veis.\n\nQual serviÃ§o o trouxe atÃ© nossa toca? ğŸ¶"
  utter_ask_instrumento_aula:
  - text: "Qual instrumento vocÃª gostaria de aprender?"
  utter_agendamento_consultoria:
  - text: "ğŸ¶\nA consultoria musical Ã© tipo um bate-papo cheio de harmonia, onde a gente entende seus objetivos, seu nÃ­vel atual e traÃ§a um caminho musical que seja a sua cara! ğŸ¾âœ¨\nğŸ¯ O investimento Ã© de R$ 120,00 por sessÃ£o, com duraÃ§Ã£o de aproximadamente 1h.\n\nVamos agendar? VocÃª prefere que a consultoria seja online ou presencial?"
  utter_compra_instrumento:
  - text: "ğŸ¶ Aqui na GatoHarmÃ´nico temos uma seleÃ§Ã£o de instrumentos que fazem qualquer coraÃ§Ã£o ronronar de emoÃ§Ã£o!\nViolÃµes, ukuleles, teclados, percussÃµesâ€¦ tudo afinadinho, prontinho pra vocÃª tocar suas emoÃ§Ãµes ğŸ’›\nVocÃª jÃ¡ tem um instrumento em mente ou quer minha ajudinha felina para informar todos disponiveis?"
  utter_compra_instrumento_especifico:
  - text: "Ah, um {instrumentos}! Ã“tima escolha! Temos alguns modelos de {instrumentos} disponÃ­veis. VocÃª gostaria de ver as opÃ§Ãµes ou saber mais detalhes sobre eles?"
  utter_materiais:
  - text: "Miiiiaaaau temos sim! E tem conteÃºdo tÃ£o bom que atÃ© os gatos do bairro andam cantando afinadinho! ğŸ¤ğŸ±âœ¨\n Na Gato HarmÃ´nico, vocÃª pode acessar nossos vÃ­deos, e-books, tutoriais e exercÃ­cios musicais atravÃ©s de dois planos:\n\nğŸ§ Plano Gratuito\n Acesso a uma seleÃ§Ã£o de conteÃºdos educativos\n Com anÃºncios entre as aulas\n Ideal pra quem tÃ¡ comeÃ§ando ou quer experimentar sem compromisso\n ğŸ’° R$ 0,00(gratuito mesmo!)\n\nğŸµ Plano Premium\n Acesso completo a todos os conteÃºdos (inclusive os exclusivos!\n Zero anÃºncios! SÃ³ mÃºsica e aprendizado ğŸ¶\n Materiais bÃ´nus todo mÃªs (tipo playbacks, partituras, desafios interativos)\n Acesso a um grupo VIP de alunos e dicas direto dos nossos professores\n ğŸ’³ R$ 29,90 por mÃªs ou R$ 149,00 no plano semestral (com mimo surpresa no envio! ğŸ)\n\nPara conhecer Ã© sÃ³ acessar nosso link: [LINK SITE]"
  utter_despedida:
  - text: "Eu agradeÃ§o pela sua visita, miauzinho! ğŸ˜¸\n Fico por aqui, afinando meu miado e esperando vocÃª voltar quando quiser.\n Que sua semana seja cheia de harmonia, sorrisos e notas felizes! ğŸ¼ğŸ’›\n AtÃ© a prÃ³xima, com um miado carinhoso e um tchau de patinha! ğŸ‘‹ğŸ¾"
  - text: "Miauâ€¦ Parece que vocÃª foi embora antes de dar tchauzinho! ğŸ˜¸\n Se precisar de algo, estou sempre aqui, pronto para dar aquele miado de ajuda.\n Fica Ã  vontade para voltar quando quiser! Que seu dia seja cheio de melodias felizes e muita inspiraÃ§Ã£o! ğŸ¼ğŸ’›\n AtÃ© a prÃ³xima, com um miado de carinho e uma patinha acenando! ğŸ‘‹ğŸ¾"
  utter_ask_modo_agendamento:
  - text: "Certo! VocÃª prefere que a aula/consultoria seja online ou presencial?"
  utter_ask_dados_pessoais:
  - text: "Perfeito! Para agendar, preciso do seu nome completo, CPF, RG e data de nascimento (DD/MM/AAAA). Pode me passar, por favor?"
  utter_ask_dia_agendamento:
  - text: "Ã“timo! Agora que temos seus dados, vamos prosseguir com o agendamento? Qual o melhor dia para vocÃª? (Ex: 10/07 ou prÃ³xima segunda)"
  utter_ask_hora_agendamento:
  - text: "Entendido! E qual seria o melhor horÃ¡rio nesse dia? (Ex: 14:30 ou 16h)"
  # REMOVIDA AQUI: utter_confirma_agendamento_final
  utter_pagamento:
  - text: "Para finalizar, clique neste link e realize o pagamento: [LINK PAGAMENTO]"
  utter_listagem_instrumentos:
  - text: "Na Gato Harmonicos vendemos:\nINSTRUMENTOS DE CORDA: Guitarras, ViolÃµes, Contrabaixos, Ukuleles, Cavaquinhos, Violinos, Violas e Violoncelos.\nINSTRUMENTOS DE SOPRO: Flautas, Clarinetes, Saxofones, Trompetes, Trombones, Tubas e Gaitas de boca.\nINSTRUMENTOS DE TECLAS: Teclados, Sintetizadores, Pianos, Ã“rgÃ£os e Escaletas.\nINSTRUMENTOS DE PERCUSSÃƒO: Baterias, Pandeiros, Tamborins, Surdos, Timbas, TriÃ¢ngulos, Kalimbas e Boomwhackers.\nPara adquirir Ã© sÃ³ entrar neste link e fazer sua compra: [LINK SITE]"
  utter_ask_rg:
  - text: "Entendido. E qual o seu RG?"
  utter_ask_cpf:
  - text: "Ok. E o CPF? (XXX.XXX.XXX-XX ou apenas nÃºmeros)"
  utter_ask_data_nascimento:
  - text: "Certo. E a data de nascimento (DD/MM/AAAA)?"
  utter_ask_nome:
  - text: "Qual o seu nome completo?"
  utter_default:
  - text: "Miau... Desculpe, nÃ£o entendi muito bem. Poderia repetir de outra forma? ğŸ¾"
  utter_inactivity_reminder:
  - text: "Miau! ğŸ˜¸ Parece que vocÃª deu uma sumidinha. Ainda precisa da minha ajuda felina por aqui? ğŸ¾"
  utter_confirm_personal_data:
  - text: "Confirmando seus dados: Nome: {nome}, CPF: {cpf}, RG: {rg_display}, Data de Nascimento: {data_nascimento}. EstÃ¡ tudo correto?"
  utter_de_nada:
  - text: "De nada! Sempre que precisar, Ã© sÃ³ miar! ğŸ˜¸"
  - text: "Miaaau, por nada! Se precisar de mais alguma coisa, estou Ã  disposiÃ§Ã£o! ğŸ¾"
  utter_informar_preco_aula_especifica:
  - text: "A aula de {instrumentos} custa R$ 90,00 por sessÃ£o individual, ou R$ 320,00 o pacote mensal com 4 aulas. Gostaria de agendar ou saber mais sobre os horÃ¡rios?"
  utter_informar_preco_aula_geral:
  - text: "Nossas aulas custam R$ 90,00 por sessÃ£o individual, ou R$ 320,00 o pacote mensal com 4 aulas. Para qual instrumento vocÃª gostaria de saber o preÃ§o e disponibilidade?"
  utter_informar_preco_consultoria:
  - text: "A consultoria musical tem o investimento de R$ 120,00 por sessÃ£o. Deseja agendar ou precisa de mais alguma informaÃ§Ã£o?"

actions:
  - action_schedule_inactivity_reminder
  - action_react_to_inactivity_reminder
  - validate_personal_data_form
  - action_extract_and_confirm_data
  - action_deactivate_form
  - action_forget_reminders
  - action_start_aula_agendamento
  - action_process_agendamento_date
  - action_set_consultoria_details
  - action_informar_preco_aula
  - action_handle_compra_instrumento
  - action_reset_personal_data_slots
  - action_forget_reminders_and_ask_dia
  - action_ask_dia_agendamento
  - action_confirm_agendamento_final # ADICIONADA A NOVA AÃ‡ÃƒO
  - utter_saudacao
  - utter_ask_instrumento_aula
  - utter_agendamento_consultoria
  - utter_compra_instrumento
  - utter_compra_instrumento_especifico
  - utter_materiais
  - utter_despedida
  - utter_ask_modo_agendamento
  - utter_ask_dados_pessoais
  - utter_ask_dia_agendamento
  - utter_ask_hora_agendamento
  - utter_confirma_agendamento_final
  - utter_pagamento
  - utter_listagem_instrumentos
  - utter_ask_rg
  - utter_ask_cpf
  - utter_ask_data_nascimento
  - utter_ask_nome
  - utter_default
  - utter_inactivity_reminder
  - utter_confirm_personal_data
  - utter_de_nada
  - utter_informar_preco_aula_especifica
  - utter_informar_preco_aula_geral
  - utter_informar_preco_consultoria

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true